<div class="main-layout">
  <!-- Sidebar -->
  <app-sidebar
    [isCollapsed]="sidebarCollapsed"
    (toggleCollapse)="onToggleSidebar()"
    [class.mobile-open]="sidebarMobileOpen"
  ></app-sidebar>

  <!-- Overlay para mobile -->
  <div 
    class="sidebar-overlay" 
    *ngIf="sidebarMobileOpen"
    (click)="onCloseMobileSidebar()"
  ></div>

  <div class="app-wrapper" [class.with-sidebar]="true">
    <header 
      class="app-header"
      [class.sidebar-collapsed]="sidebarCollapsed"
    >
      <div class="header-content">
        <button 
          class="mobile-menu-btn"
          (click)="onToggleMobileSidebar()"
        >
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
        <div class="header-title-section">
          <app-logo [showText]="true"></app-logo>
          <p class="header-subtitle">Análise inteligente com método socrático</p>
        </div>
        <div class="header-actions">
          <button
            class="theme-toggle"
            type="button"
            (click)="onToggleTheme()"
            [attr.aria-label]="theme.isDark ? 'Ativar tema claro' : 'Ativar tema escuro'"
            [attr.title]="theme.isDark ? 'Tema claro' : 'Tema escuro'"
          >
            <svg *ngIf="!theme.isDark" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="4"></circle>
              <path d="M12 2v2"></path>
              <path d="M12 20v2"></path>
              <path d="M4.93 4.93l1.41 1.41"></path>
              <path d="M17.66 17.66l1.41 1.41"></path>
              <path d="M2 12h2"></path>
              <path d="M20 12h2"></path>
              <path d="M4.93 19.07l1.41-1.41"></path>
              <path d="M17.66 6.34l1.41-1.41"></path>
            </svg>
            <svg *ngIf="theme.isDark" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 0 0 9.79 9.79z"></path>
            </svg>
          </button>
          <div class="user-info" *ngIf="authService.currentUser">
            <span class="user-name">{{ authService.currentUser.nome }}</span>
            <button class="btn-logout" (click)="onLogout()">Sair</button>
          </div>
        </div>
      </div>
    </header>

    <main class="main-content">
      <router-outlet></router-outlet>
    </main>

    <footer class="app-footer">
      <p>Socratis · Análise Inteligente de Redações · 2025</p>
    </footer>
  </div>
</div>

